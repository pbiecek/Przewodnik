<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Jak zeskrobywać dane ze stron www? | Przewodnik po pakiecie R 4.0</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../Programowanie/jak_wczytywac_korpusy_tekstu.html" />
    
    
    <link rel="prev" href="../Programowanie/jak_wczytywac_tabele_z_formatu_html.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.3.4"
        data-chapter-title="Jak zeskrobywać dane ze stron www?"
        data-filepath="Programowanie/jak_zeskrobywac_dane_ze_stron_www_uzywajac_pakietu.md"
        data-basepath=".."
        data-revision="Fri Feb 26 2016 22:36:38 GMT+0100 (CET)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Wprowadzenie
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Programowanie/programowanie_w_jezyku_r.html">
            
                
                    <a href="../Programowanie/programowanie_w_jezyku_r.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Programowanie w języku R
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="Programowanie/jak_korzystac_z_tej_ksiazki.html">
            
                
                    <a href="../Programowanie/jak_korzystac_z_tej_ksiazki.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Jak korzystać z tej książki?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Programowanie/jak_zainstalowac_r_i_rstudio.html">
            
                
                    <a href="../Programowanie/jak_zainstalowac_r_i_rstudio.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Jak zainstalować R i RStudio?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Programowanie/jak_wczytywac_i_zapisywac_dane.html">
            
                
                    <a href="../Programowanie/jak_wczytywac_i_zapisywac_dane.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Jak wczytywać i zapisywać dane?
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="Programowanie/jak_wczytac_tabele_danych_z_pliku_csv_lub_txt.html">
            
                
                    <a href="../Programowanie/jak_wczytac_tabele_danych_z_pliku_csv_lub_txt.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.1.</b>
                        
                        Jak wczytać tabele danych z pliku csv lub txt?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="Programowanie/jak_wczytac_dane_z_excela.html">
            
                
                    <a href="../Programowanie/jak_wczytac_dane_z_excela.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.2.</b>
                        
                        Jak wczytać tabele danych z Excela?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="Programowanie/jak_wczytywac_tabele_z_formatu_html.html">
            
                
                    <a href="../Programowanie/jak_wczytywac_tabele_z_formatu_html.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.</b>
                        
                        Jak wczytać tabele danych ze strony www?
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.3.4" data-path="Programowanie/jak_zeskrobywac_dane_ze_stron_www_uzywajac_pakietu.html">
            
                
                    <a href="../Programowanie/jak_zeskrobywac_dane_ze_stron_www_uzywajac_pakietu.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.4.</b>
                        
                        Jak zeskrobywać dane ze stron www?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="Programowanie/jak_wczytywac_korpusy_tekstu.html">
            
                
                    <a href="../Programowanie/jak_wczytywac_korpusy_tekstu.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.5.</b>
                        
                        Jak wczytywać korpusy tekstu?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="Programowanie/jak_pobrac_dane_z.html">
            
                
                    <a href="../Programowanie/jak_pobrac_dane_z.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.6.</b>
                        
                        Jak pobrać dane z...?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="Programowanie/zadania.html">
            
                
                    <a href="../Programowanie/zadania.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.7.</b>
                        
                        Zadania
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
            <span><b>1.4.</b> Jak tworzyć pętle i instrukcje warunkowe?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
            <span><b>1.5.</b> Jak tworzyć funkcje?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
            <span><b>1.6.</b> Jak pracować z typami w R?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Programowanie/jak_budowac_pakiety.html">
            
                
                    <a href="../Programowanie/jak_budowac_pakiety.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Jak budować pakiety?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
            <span><b>1.8.</b> Jak tworzyć reprodukowalne raporty?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
            <span><b>1.9.</b> Jak debugować kod R?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
            <span><b>1.10.</b> Jak zwiększyć wydajność kodu R?</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Programowanie/jak_korzystac_z_serwisu_github_i_waffle.html">
            
                
                    <a href="../Programowanie/jak_korzystac_z_serwisu_github_i_waffle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Jak korzystać z serwisu GitHub?
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Programowanie/jak_korzystac_z_serwisu_waffle.html">
            
                
                    <a href="../Programowanie/jak_korzystac_z_serwisu_waffle.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.</b>
                        
                        Jak korzystać z serwisu Waffle?
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Analiza/analiza_danych_z_programem_r.html">
            
            <span><b>2.</b> Analiza danych z programem R</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Analiza/eksploracja_danych.html">
            
                
                    <a href="../Analiza/eksploracja_danych.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Eksploracja danych
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="Analiza/analiza_skupisk.html">
            
                
                    <a href="../Analiza/analiza_skupisk.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Analiza Skupisk
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
            <span><b>2.2.</b> Modelowanie danych</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" >
            
            <span><b>2.3.</b> Testy</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="references.html">
            
                
                    <a href="../references.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Bibliografia
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Programowanie/test.html">
            
                
                    <a href="../Programowanie/test.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Test?
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Przewodnik po pakiecie R 4.0</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="jak-zeskrobywa&#x107;-dane-ze-stron-www">Jak zeskrobywa&#x107; dane ze stron www?</h1>
<p>Uniwersalnym i wygodnym narz&#x119;dziem do pobierania danych ze stron internetowych s&#x105; pakiety <code>rvest</code> i <code>RSelenium</code>. Przedstawmy je na przyk&#x142;adach.</p>
<h2 id="skrobanie-htmla-z-u&#x17C;yciem-pakietu-rvest">Skrobanie HTMLa z u&#x17C;yciem pakietu <code>rvest</code></h2>
<p>Kluczowe funkcje z pakietu <code>rvest</code> podzieli&#x107; mo&#x17C;na na trzy grupy:</p>
<ul>
<li><code>html</code> - wczytuje stron&#x119; internetow&#x105; i tworzy struktur&#x119; drzewiast&#x105; struktur&#x119; html,</li>
<li><code>html_nodes</code> - wyszukuje w&#x119;z&#x142;y w drzewie pasuj&#x105;ce do okre&#x15B;lonego wzorca (tzw. selectora),</li>
<li><code>html_text</code>, <code>html_tag</code>, <code>html_attrs</code> - funkcje wyci&#x105;gaj&#x105;ce tre&#x15B;&#x107; lub atrybuty w&#x119;z&#x142;&#xF3;w html.</li>
</ul>
<p>Zazwyczaj praca z pakietem <code>rvest</code> rozpoczyna si&#x119; od wczytania strony HTML, nst&#x119;pnei wyszukania w tej stornie interesuj&#x105;cych fragment&#xF3;w i wy&#x142;uskanie z tych fragment&#xF3;w tekstu.</p>
<p>Zobaczmy jak te kroki wygl&#x105;daj&#x105; na przyk&#x142;adzie pobierania danych o premierach film&#xF3;w w serwisie FilmWeb. </p>
<p>Lista premier znajduje si&#x119; na stornie <a href="http://www.filmweb.pl/premiere" target="_blank">http://www.filmweb.pl/premiere</a>. Aby pozna&#x107; wzorce/selektory pozwalaj&#x105;ce na identyfikacje istotnej tre&#x15B;ci, naj&#x142;atwiej jest zainstalowa&#x107; wtyczk&#x119; do przegl&#x105;darki SelectorGadget <a href="http://selectorgadget.com/" target="_blank">http://selectorgadget.com/</a>. Umo&#x17C;liwia ona wybranie myszk&#x105; interesuj&#x105;cych element&#xF3;w oraz sprawdzenie jak&#x105; posta&#x107; ma selektor pasuj&#x105;cy do zaznaczonych opcji.</p>
<p>Na poni&#x17C;szym zdj&#x119;ciu przedstawiony jest przyk&#x142;ad u&#x17C;ycia wtyczki SelectorGadget. Zaznaczone na &#x17C;&#xF3;&#x142;to elementy pasuj&#x105; do wzorca CSS <code>.gwt-filmPage</code></p>
<p><img src="rysunki/rvest2.png" alt="SelectorGadget na stronie o premierach film&#xF3;w"></p>
<p>Ostatnim krokiem jest wy&#x142;uskanie danych z zaznaczonej kolekcji uchwyt&#xF3;w. Funkcja <code>html_text()</code> wyci&#x105;ga tre&#x15B;&#x107; z w&#x119;z&#x142;&#xF3;w HTML.</p>
<p>Poni&#x17C;szy przyk&#x142;ad wybiera z serwisu FilmWeb informacje o najbli&#x17C;szych premierach.</p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(rvest)
premiery &lt;- html(<span class="hljs-string">&quot;http://www.filmweb.pl/premiere&quot;</span>)
</code></pre>
<pre><code>## Warning: &apos;html&apos; is deprecated.
## Use &apos;read_html&apos; instead.
## See help(&quot;Deprecated&quot;)
</code></pre><pre><code class="lang-r">filmy &lt;- html_nodes(premiery, <span class="hljs-string">&quot;.gwt-filmPage&quot;</span>)
html_text(filmy)
</code></pre>
<pre><code>##  [1] &quot;Spotlight&quot;                              
##  [2] &quot;Planeta Singli&quot;                         
##  [3] &quot;G&#x119;sia sk&#xF3;rka&quot;                           
##  [4] &quot;Ardeny&quot;                                 
##  [5] &quot;Misiek w Nowym Jorku&quot;                   
##  [6] &quot;Umrika&quot;                                 
##  [7] &quot;&#x15A;piewaj&#x105;cy obrusik&quot;                     
##  [8] &quot;Deadpool&quot;                               
##  [9] &quot;Jak to robi&#x105; single&quot;                    
## [10] &quot;Widz&#x119;, widz&#x119;&quot;                           
## [11] &quot;Ojcowie i c&#xF3;rki&quot;                        
## [12] &quot;Barany. Islandzka opowie&#x15B;&#x107;&quot;             
## [13] &quot;Skala szaro&#x15B;ci&quot;                         
## [14] &quot;Eisenstein w Meksyku&quot;                   
## [15] &quot;Brooklyn&quot;                               
## [16] &quot;Ave, Cezar!&quot;                            
## [17] &quot;Zwierzogr&#xF3;d&quot;                            
## [18] &quot;Na granicy&quot;                             
## [19] &quot;Oddychaj&quot;                               
## [20] &quot;F&#xFA;si&quot;                                   
## [21] &quot;Sprawiedliwy&quot;                           
## [22] &quot;Ch&#x142;opiec i &#x15B;wiat&quot;                       
## [23] &quot;Cier&#x144; Boga&quot;                             
## [24] &quot;Pok&#xF3;j&quot;                                  
## [25] &quot;Lobster&quot;                                
## [26] &quot;Bogowie Egiptu&quot;                         
## [27] &quot;7 rzeczy, kt&#xF3;rych nie wiecie o facetach&quot;
## [28] &quot;Grimsby&quot;                                
## [29] &quot;Yona&quot;                                   
## [30] &quot;110%&quot;                                   
## [31] &quot;Tysi&#x105;c i jedna noc &#x2013; cz. 1, niespokojny&quot;
## [32] &quot;Dyke Hard&quot;
</code></pre><p>Pakiet <code>rvest</code> pozwala te&#x17C; na parsowanie tabel oraz na obs&#x142;ug&#x119; formularzy, sesji i &#x15B;ledzenie link&#xF3;w. W poni&#x17C;szym przyk&#x142;adzie otwieramy stron&#x119; z bazy danych o filmach IMDb (Internet Movie Database) a informacjami o filmie <em>Lego Przygoda</em>.</p>
<p>Nast&#x119;pnie trzecia tabela jest wy&#x142;uskiwana i wypisywana na ekranie.</p>
<pre><code class="lang-r">lego_movie &lt;- html(<span class="hljs-string">&quot;http://www.imdb.com/title/tt1490017/&quot;</span>)
</code></pre>
<pre><code>## Warning: &apos;html&apos; is deprecated.
## Use &apos;read_html&apos; instead.
## See help(&quot;Deprecated&quot;)
</code></pre><pre><code class="lang-r">htab &lt;- html_nodes(lego_movie, <span class="hljs-string">&quot;table&quot;</span>)[[<span class="hljs-number">3</span>]]
html_table(htab)
</code></pre>
<pre><code>##                                                      X1
## 1                                     Amazon Affiliates
## 2 Amazon Video\n                Watch Movies &amp;TV Online
##                                                               X2
## 1                                                           &lt;NA&gt;
## 2 Prime Video\n                Unlimited Streamingof Movies &amp; TV
##                                                           X3
## 1                                                       &lt;NA&gt;
## 2 Amazon Germany\n                Buy Movies onDVD &amp; Blu-ray
##                                                         X4
## 1                                                     &lt;NA&gt;
## 2 Amazon Italy\n                Buy Movies onDVD &amp; Blu-ray
##                                                          X5
## 1                                                      &lt;NA&gt;
## 2 Amazon France\n                Buy Movies onDVD &amp; Blu-ray
##                                                        X6
## 1                                                    &lt;NA&gt;
## 2 Amazon India\n                Buy Movie andTV Show DVDs
##                                             X7
## 1                                         &lt;NA&gt;
## 2 DPReview\n                DigitalPhotography
##                                             X8
## 1                                         &lt;NA&gt;
## 2 Audible\n                DownloadAudio Books
</code></pre><h2 id="skrobanie-htmla-z-u&#x17C;yciem-pakietu-rselenium">Skrobanie HTMLa z u&#x17C;yciem pakietu <code>RSelenium</code></h2>
<p>Pakiet <code>rvest</code> jest bardzo prosty a jednocze&#x15B;nie pozwala na pobranie wielu danych ze strony. Nie pozwala jednak na utrzymanie sesji i praca ze stron&#x105; tak jakby obs&#x142;ugiwa&#x142; j&#x105; interaktywnie cz&#x142;owiek. Do tego typu zada&#x144; mo&#x17C;na u&#x17C;y&#x107; biblioteki Selenium dost&#x119;pnej poprzez pakiet <code>RSelenium</code>. 
Biblioteka Selenium po inicjacji otwiera okno przegl&#x105;darki a nast&#x119;pnie pozwala na wykonywanie okre&#x15B;lonych operacji na tym oknie.</p>
<pre><code class="lang-r"><span class="hljs-keyword">library</span>(RSelenium)
checkForServer()
startServer()
przegladarka &lt;- remoteDriver$new()
przegladarka$open()
</code></pre>
<p>Przyk&#x142;adowo funkcj&#x105; <code>navigate()</code> mo&#x17C;emy otworzy&#x107; w przegl&#x105;darce wskazan&#x105; stron&#x119; internetow&#x105;. Funkcj&#x105; <code>findElement()</code> mo&#x17C;emy odwo&#x142;a&#x107; si&#x119; do elementu na otwartej stornie internetowej. Funkcj&#x105; <code>sendKeysToElement()</code> mo&#x17C;na zmieni&#x107; warto&#x15B;&#x107; wskazanego elementu oraz wykona&#x107; wskazan&#x105; akcj&#x119;, np. przes&#x142;a&#x107; klawisz ENTER. </p>
<pre><code class="lang-r">przegladarka$navigate(<span class="hljs-string">&quot;http://www.google.com&quot;</span>)

wyszukiwarka &lt;- przegladarka$findElement(using = <span class="hljs-string">&quot;name&quot;</span>, value = <span class="hljs-string">&quot;q&quot;</span>)
wyszukiwarka$sendKeysToElement(list(<span class="hljs-string">&quot;Przewodnik po pakiecie R&quot;</span>, key=<span class="hljs-string">&quot;enter&quot;</span>))

przegladarka$goBack()
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Programowanie/jak_wczytywac_tabele_z_formatu_html.html" class="navigation navigation-prev " aria-label="Previous page: Jak wczytać tabele danych ze strony www?"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Programowanie/jak_wczytywac_korpusy_tekstu.html" class="navigation navigation-next " aria-label="Next page: Jak wczytywać korpusy tekstu?"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
